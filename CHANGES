   51 Russ Allbery	2007-04-11
      Release 1.3.

   50 Russ Allbery	2007-04-11
      Make --with-kerberos and --without-libkafs work properly together.

   49 Russ Allbery	2007-04-11
      The only option from the Sourceforge PAM module we care about and
      haven't implemented is afs_cells.  Adjust the TODO list accordingly.

   48 Russ Allbery	2007-04-11
      Add a notokens configuration option which, when set, tells the module
      to only create a PAG and not to try to obtain tokens.  Based on a
      patch from Jason McCormick.

   47 Russ Allbery	2007-04-11
      Add dependencies.

   46 Russ Allbery	2007-04-11
      When forking an external aklog, also close standard input and reopen
      it to /dev/null.  Normal aklog programs won't try to read from
      standard input, but don't connect their standard input to any stray
      file descriptor inherited by the process just in case.
      
      Improve diagnostics around token acquisition.  Thanks, Jeff Blaine.

   45 Russ Allbery	2007-03-24
      Release 1.2.

   44 Russ Allbery	2007-03-24
      Produce better error messages when Kerberos operations fail.

   43 Russ Allbery	2007-03-24
      Add support for calling the Heimdal libkafs functions for obtaining
      AFS tokens rather than running an external aklog program.  This
      support is the default if libkafs and the Kerberos v5 functions were
      found at build time and --with-kerberos was passed to configure.

   42 Russ Allbery	2007-03-15
      Added --without-libkafs to force using the internal AFS syscall
      implementation and not link with libkafs or libkopenafs, even if the
      libraries are available.

   41 Russ Allbery	2007-03-15
      When retain_after_close is set, don't destroy tokens on DELETE_CRED
      either.  OpenSSH calls this when the session dies.  Thanks to Thomas
      Kula for the patch.

   40 Russ Allbery	2007-03-14
      Don't fail during configure if Kerberos libraries couldn't be found
      unless --with-kerberos was explicitly requested.

   39 Russ Allbery	2007-01-16
      Fix installation of the man page when building outside of the source
      directory.

   38 Russ Allbery	2006-12-18
      Fix blurb to not say that the direct system call is Linux-specific.

   37 Russ Allbery	2006-12-18
      Sneak some additional documentation of optionally building with
      Kerberos support into the 1.1 release.

   36 Russ Allbery	2006-12-18
      Release 1.1.

   35 Russ Allbery	2006-12-18
      Add optional support for linking with the Kerberos libraries and
      obtaining configuration from the system krb5.conf file.
      
      Add the kdestroy option which, if built with Kerberos support, removes
      the ticket cache after successfully running aklog.
      
      Fix a bug in reporting unknown options.
      
      Don't worry about PAM_SILENT; it's irrelevant to us.

   34 Russ Allbery	2006-12-11
      Actually link with libkafs if we detect it at configure time.

   33 Russ Allbery	2006-12-06
      Add --without-libkafs configure flag to TODO.

   32 Russ Allbery	2006-12-06
      Remove the beta note from the documentation.

   31 Russ Allbery	2006-12-06
      Release 1.0.

   30 Russ Allbery	2006-12-06
      Link explicitly against the Kerberos libraries by default when linking
      with libkafs, only relying on transitive shared library dependencies
      when --enable-reduced-depends is passed to configure.  This should not
      be necessary on any of the currently supported platforms but may make
      porting easier to systems with deficient shared library support.

   29 Russ Allbery	2006-12-06
      Add --with-afs-headers to configure so that the user doesn't have to
      know the right syntax for setting CPPFLAGS.
      
      When using gcc, link with -fPIC as well as compiling with it per the
      gcc documentation.
      
      Support building on Mac OS X.  The resulting module isn't tested and
      may not work.  Thanks, Sebastian Hagedorn.

   28 Russ Allbery	2006-12-06
      Add additional configuration information for Solaris.

   27 Russ Allbery	2006-11-28
      Release 0.3.

   26 Russ Allbery	2006-11-27
      strdup the default aklog path when adding it to our options struct
      since we want to free it later.

   25 Russ Allbery	2006-11-27
      Compile in a default path to aklog if configure can find it on the
      path or if told the path with the --with-aklog option.  In this case,
      program is now optional in the PAM configuration.

   24 Russ Allbery	2006-11-27
      Remove erroneous information about Solaris 8 in retain_after_close
      documentation and explain more fully why one might want to use this
      option.

   23 Russ Allbery	2006-11-27
      Add some additional instructions for Solaris and a thank-you to Sean
      O'Malley for Solaris porting information.

   22 Russ Allbery	2006-11-27
      =back should be =cut at the end of the POD documentation.

   21 Russ Allbery	2006-11-27
      Pass -shared only to gcc.  Report an error for non-gcc compilers on
      platforms other than Solaris, since we don't know how to create PIC
      code or shared objects there.

   20 Russ Allbery	2006-11-27
      Document the pam_get_user const warning on Solaris.

   19 Russ Allbery	2006-11-27
      Pass (char *) 0 instead of NULL to execle as a command terminator
      to be more formally correct.

   18 Russ Allbery	2006-11-27
      On platforms where we know the appropriate compiler flags, try to
      build the module so that symbols are resolved within the module in
      preference to any externally available symbols.  Also add the
      hopefully correct compiler flags for Sun's C compiler.

   17 Russ Allbery	2006-11-27
      Use __func__ instead of __FUNCTION__ and provide a fallback for older
      versions of gcc and for systems that support neither.  Should fix
      compilation issues with Sun's C compiler.

   16 Russ Allbery	2006-11-17
      Reorder k_hasafs so that we check errno before restoring it.

   15 Russ Allbery	2006-11-17
      Include unistd.h in sys-linux.c for close.

   14 Russ Allbery	2006-11-17
      Release 0.2.

   13 Russ Allbery	2006-11-17
      Update for the Solaris port and the existence of the man page.

   12 Russ Allbery	2006-11-17
      Add a man page.

   11 Russ Allbery	2006-11-15
      Fix one stray use of afs_syscall instead of pamafs_syscall.

   10 Russ Allbery	2006-11-15
      We now need to know the return type of signal handlers.

    9 Russ Allbery	2006-11-15
      Add a fallback implementation of the AFS system call for platforms
      that use syscall, and add the signal handler protection for the
      k_hasafs probe for those platforms.  The PAM module should now build
      on Solaris without requiring libkafs or libkopenafs.

    8 Russ Allbery	2006-11-15
      Log a message if aklog fails, but return PAM_SUCCESS from the module
      whether aklog succeeded or not.  If we fail, the user may be kicked
      out of their session even though AFS tokens may not be necessary and
      only obtained as a convenience.  Obtaining a PAG is still required.

    7 Russ Allbery	2006-11-15
      Add an aklog_homedir option saying to pass -p <homedir> to aklog.
      This will obtain tokens in whatever AFS cells are required to access
      the user's home directory and can be used when something more complex
      than obtaining tokens in the local default cell is needed.

    6 Russ Allbery	2006-11-15
      Add an always_aklog option saying to always run aklog even if the user
      doesn't appear to have a ticket cache.
      
      Add additional includes needed on Solaris.

    5 Russ Allbery	2006-11-15
      Reopen stdout and stderr to /dev/null before running aklog so that any
      error messages from aklog don't confuse the calling program.

    4 Russ Allbery	2006-11-10
      Add documentation for the initial release.

    3 Russ Allbery	2006-11-10
      Now actually compiles and appears to work properly.  Added the
      program PAM argument to set which program to run and fixed lots of
      syntax errors and extra and missing variables.

    2 Russ Allbery	2006-11-10
      Add supporting Autoconf files.  autoreconf apparently doesn't know
      how to copy them over unless we use Automake.

    1 Russ Allbery	2006-11-10
      Initial first-draft implementation, as yet uncompiled and untested.

